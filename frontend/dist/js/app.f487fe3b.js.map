{"version":3,"file":"js/app.f487fe3b.js","mappings":"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","sources":["webpack://frontend/./src/App.vue","webpack://frontend/./src/components/ChatWindow.vue","webpack://frontend/./src/components/ChatWindow.vue?d527","webpack://frontend/./src/components/MessageInput.vue","webpack://frontend/./src/components/MessageInput.vue?be4a","webpack://frontend/./src/components/Sidebar.vue","webpack://frontend/./src/components/Sidebar.vue?5d01","webpack://frontend/./src/components/Topbar.vue","webpack://frontend/./src/components/Topbar.vue?0449","webpack://frontend/./src/services/chatService.js","webpack://frontend/./src/App.vue?7ccd","webpack://frontend/./src/main.js","webpack://frontend/webpack/bootstrap","webpack://frontend/webpack/runtime/chunk loaded","webpack://frontend/webpack/runtime/define property getters","webpack://frontend/webpack/runtime/global","webpack://frontend/webpack/runtime/hasOwnProperty shorthand","webpack://frontend/webpack/runtime/jsonp chunk loading","webpack://frontend/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\" class=\"bg-background h-screen flex text-text\">\n    <div v-if=\"!isAuthenticated\" class=\"w-full h-full flex items-center justify-center\">\n      <button @click=\"login\" class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">\n        Login\n      </button>\n    </div>\n    <div v-else class=\"w-full h-full flex\">\n      <Sidebar />\n      <!-- Main Content -->\n      <div class=\"flex-grow flex flex-col px-4\">\n        <Topbar :user=\"user\" @logout=\"logout\" />\n        <div class=\"flex-grow flex flex-col\">\n          <ChatWindow :messages=\"messages\" class=\"w-full max-w-2xl flex-grow\" />\n          <MessageInput @send-message=\"sendMessage\" class=\"w-full max-w-2xl mt-4\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ChatWindow from \"./components/ChatWindow.vue\";\nimport MessageInput from \"./components/MessageInput.vue\";\nimport Sidebar from \"./components/Sidebar.vue\";\nimport Topbar from \"./components/Topbar.vue\";\nimport { chatService } from \"./services/chatService.js\";\n\nexport default {\n  name: \"App\",\n  components: {\n    ChatWindow,\n    MessageInput,\n    Sidebar,\n    Topbar,\n  },\n  data() {\n    return {\n      messages: [],\n      socket: null,\n      user: null,\n      isAuthenticated: false,\n    };\n  },\n  methods: {\n    sendMessage(message) {\n      const messageData = {\n        user_id: this.user.profile.name, // Using user's name from profile\n        content: message,\n      };\n      this.socket.send(JSON.stringify(messageData));\n    },\n    login() {\n      chatService.login();\n    },\n    logout() {\n      chatService.logout();\n    },\n    async initializeApp() {\n      const user = await chatService.getUser();\n      this.user = user;\n      this.isAuthenticated = !!user;\n\n      if (this.isAuthenticated) {\n        this.socket = await chatService.connectWebSocket((message) => {\n          this.messages.push(message);\n        });\n        const messages = await chatService.getMessages();\n        this.messages = messages;\n      }\n    },\n  },\n  async created() {\n    if (window.location.pathname === \"/callback\") {\n      await chatService.handleAuthentication();\n      window.history.replaceState({}, document.title, \"/\");\n    }\n    this.initializeApp();\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n}\n</style>\n","<template>\n  <div class=\"chat-window bg-secondary p-4 rounded-lg shadow-md overflow-y-auto h-96\">\n    <div\n      v-for=\"(message, index) in messages\"\n      :key=\"message.message_id || index\"\n      class=\"message mb-3 p-3 rounded-lg max-w-[80%]\"\n      :class=\"{\n        'bg-primary text-white ml-auto': message.user_id === 'user1', // Assuming 'user1' is the current user\n        'bg-accent text-white': message.user_id !== 'user1',\n      }\"\n    >\n      <span class=\"font-bold block text-sm opacity-80\">{{ message.user_id }}:</span>\n      <span class=\"block text-base\">{{ message.content }}</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ChatWindow\",\n  props: {\n    messages: {\n      type: Array,\n      required: true,\n    },\n  },\n  updated() {\n    console.log(\"ChatWindow component updated with new messages:\", this.messages);\n    const chatWindow = this.$el;\n    chatWindow.scrollTop = chatWindow.scrollHeight;\n  },\n};\n</script>\n\n<style scoped>\n/* No scoped styles needed, using Tailwind CSS */\n</style>","import { render } from \"./ChatWindow.vue?vue&type=template&id=048771b6&scoped=true\"\nimport script from \"./ChatWindow.vue?vue&type=script&lang=js\"\nexport * from \"./ChatWindow.vue?vue&type=script&lang=js\"\n\nimport \"./ChatWindow.vue?vue&type=style&index=0&id=048771b6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-048771b6\"]])\n\nexport default __exports__","<template>\n  <div class=\"message-input flex p-4 bg-secondary rounded-lg shadow-md mt-4\">\n    <input\n      v-model=\"message\"\n      @keyup.enter=\"send\"\n      placeholder=\"Type a message...\"\n      class=\"flex-grow p-3 rounded-l-lg border-none focus:ring-2 focus:ring-primary outline-none bg-background text-text\"\n    />\n    <button\n      @click=\"send\"\n      class=\"bg-primary hover:opacity-90 text-white font-bold py-3 px-6 rounded-r-lg border border-primary transition-opacity duration-200 ml-2\"\n    >\n      Send\n    </button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"MessageInput\",\n  data() {\n    return {\n      message: \"\",\n    };\n  },\n  methods: {\n    send() {\n      if (this.message.trim() !== \"\") {\n        console.log(\"Sending message from MessageInput:\", this.message);\n        this.$emit(\"send-message\", this.message);\n        this.message = \"\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* No scoped styles needed, using Tailwind CSS */\n</style>","import { render } from \"./MessageInput.vue?vue&type=template&id=772b3ea0&scoped=true\"\nimport script from \"./MessageInput.vue?vue&type=script&lang=js\"\nexport * from \"./MessageInput.vue?vue&type=script&lang=js\"\n\nimport \"./MessageInput.vue?vue&type=style&index=0&id=772b3ea0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-772b3ea0\"]])\n\nexport default __exports__","<template>\n  <div class=\"w-1/4 bg-dark-purple p-4 shadow-md flex flex-col text-white\">\n    <h2 class=\"text-xl font-bold mb-4\">Sidebar</h2>\n    <!-- Placeholder for sidebar content -->\n    <ul class=\"space-y-2\">\n      <li>Item 1</li>\n      <li>Item 2</li>\n      <li>Item 3</li>\n    </ul>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Sidebar\",\n};\n</script>\n\n<style scoped>\n/* Add any specific sidebar styles here if needed, but Tailwind is preferred */\n</style>","import { render } from \"./Sidebar.vue?vue&type=template&id=4492e883&scoped=true\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js\"\n\nimport \"./Sidebar.vue?vue&type=style&index=0&id=4492e883&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4492e883\"]])\n\nexport default __exports__","<template>\n  <div class=\"w-full bg-dark-purple p-4 flex justify-end items-center shadow-md text-white\">\n    <div v-if=\"user\">\n      <span class=\"mr-4\">Welcome, {{ user.profile.name }}</span>\n      <button @click=\"$emit('logout')\" class=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\">\n        Logout\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Topbar\",\n  props: {\n    user: {\n      type: Object,\n      default: null,\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Add any specific topbar styles here if needed, but Tailwind is preferred */\n</style>\n","import { render } from \"./Topbar.vue?vue&type=template&id=598fbc0b&scoped=true\"\nimport script from \"./Topbar.vue?vue&type=script&lang=js\"\nexport * from \"./Topbar.vue?vue&type=script&lang=js\"\n\nimport \"./Topbar.vue?vue&type=style&index=0&id=598fbc0b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-598fbc0b\"]])\n\nexport default __exports__","import { UserManager, WebStorageStateStore } from \"oidc-client\";\n\n\nconst config = {\n  authority: import.meta.env.VITE_DEX_ISSUER_URL,\n  client_id: import.meta.env.VITE_DEX_CLIENT_ID,\n  redirect_uri: import.meta.env.VITE_DEX_REDIRECT_URI,\n  response_type: \"code\",\n  scope: import.meta.env.VITE_DEX_SCOPES,\n  post_logout_redirect_uri: import.meta.env.VITE_DEX_REDIRECT_URI,\n  userStore: new WebStorageStateStore({ store: window.localStorage }),\n};\n\nconst userManager = new UserManager(config);\n\nexport const chatService = {\n  userManager,\n\n  async login() {\n    return userManager.signinRedirect();\n  },\n\n  async logout() {\n    return userManager.signoutRedirect();\n  },\n\n  async handleAuthentication() {\n    return userManager.signinRedirectCallback();\n  },\n\n  async getUser() {\n    return userManager.getUser();\n  },\n\n  async getAccessToken() {\n    const user = await userManager.getUser();\n    if (!user) return null;\n    // If token expired, try to renew using refresh token\n    if (user.expired && user.refresh_token) {\n      try {\n        const renewedUser = await userManager.signinSilent();\n        return renewedUser.access_token;\n      } catch (err) {\n        await userManager.signoutRedirect();\n        throw new Error(\"Session expired. Please log in again.\");\n      }\n    }\n    return user.access_token;\n  },\n\n  async getMessages() {\n    const token = await this.getAccessToken();\n    if (!token) {\n      throw new Error(\"User not authenticated\");\n    }\n    const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/messages`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    if (response.status === 401) {\n      await userManager.signoutRedirect();\n      throw new Error(\"Session expired. Please log in again.\");\n    }\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch messages\");\n    }\n    return response.json();\n  },\n\n  async sendMessage(message) {\n    const token = await this.getAccessToken();\n    if (!token) {\n      throw new Error(\"User not authenticated\");\n    }\n    const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/messages`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(message),\n    });\n    if (response.status === 401) {\n      await userManager.signoutRedirect();\n      throw new Error(\"Session expired. Please log in again.\");\n    }\n    if (!response.ok) {\n      throw new Error(\"Failed to send message\");\n    }\n    return response.json();\n  },\n\n  async connectWebSocket(onMessage) {\n    const token = await this.getAccessToken();\n    if (!token) {\n      throw new Error(\"User not authenticated\");\n    }\n    const socket = new WebSocket(`${import.meta.env.VITE_WS_URL}?token=${token}`);\n    socket.onopen = () => {\n      console.log(\"WebSocket connection established.\");\n    };\n    socket.onmessage = (event) => {\n      onMessage(JSON.parse(event.data));\n    };\n    socket.onerror = (error) => {\n      console.error(\"WebSocket error:\", error);\n    };\n    socket.onclose = (event) => {\n      if (event.wasClean) {\n        console.log(`WebSocket connection closed cleanly, code=${event.code} reason=${event.reason}`);\n      } else {\n        console.error(\"WebSocket connection died\");\n      }\n    };\n    return socket;\n  },\n};","import { render } from \"./App.vue?vue&type=template&id=f54bb874\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=f54bb874&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport './assets/css/tailwind.css'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkfrontend\"] = self[\"webpackChunkfrontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], () => (__webpack_require__(341)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","isAuthenticated","user","logout","messages","sendMessage","login","message","index","key","message_id","user_id","content","name","props","type","Array","required","updated","console","log","this","chatWindow","$el","scrollTop","scrollHeight","__exports__","send","placeholder","data","methods","trim","$emit","profile","Object","default","config","authority","client_id","redirect_uri","response_type","scope","post_logout_redirect_uri","userStore","WebStorageStateStore","store","window","localStorage","userManager","UserManager","chatService","signinRedirect","signoutRedirect","handleAuthentication","signinRedirectCallback","getUser","getAccessToken","expired","refresh_token","renewedUser","signinSilent","access_token","err","Error","getMessages","token","response","fetch","headers","Authorization","status","ok","json","method","body","JSON","stringify","connectWebSocket","onMessage","socket","WebSocket","onopen","onmessage","event","parse","onerror","error","onclose","wasClean","code","reason","components","ChatWindow","MessageInput","Sidebar","Topbar","messageData","initializeApp","push","created","location","pathname","history","replaceState","document","title","render","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","keys","every","splice","r","d","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}